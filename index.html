<!DOCTYPE html>

<!--The only way I can see to make this work is to use setInterval.
    Hopefully that will work with this, and I am basically going to 
    run a function that runs the entirety of the code when setInterval
    runs.
-->
<html lang="en">
    <head>
            
           
           
       </script>
       <script type="text/javascript" src="main.js"></script>
       <style>
           #myCanvas {
               border: 1px solid black;
               position: absolute;
               left: 50%;
               top: 50%;
               margin-left: -400px;
               margin-top: -200px;
           }
           
           /*hide cursor while over canvas*/
           #myCanvas:hover {
               cursor: none;
           }
       </style>
       <title>The Brick Game</title>
       
    </head>
    
    <body>
       <canvas id="myCanvas" width="800" height="400" onload="draw();"></canvas>
       <script type="text/javascript" src="main.js"></script>
       <script type="text/javascript">
           
            var canvas = document.getElementById('myCanvas');
            var context = canvas.getContext('2d');
            var mouseX;
            
            
            //draw paddle
            
                function getMousePos(event) {
                    var rect = canvas.getBoundingClientRect();
                    return {
                      x: event.clientX - rect.left,
                      y: event.clientY - rect.top
                    };
                }
                
                var Paddle = function(x, width) {
                    this.x = x,
                    this.width = width;
                };
                
                Paddle.prototype.constrainPaddle = function() {
                    if (this.x < 25){
                        this.x = 25;
                    } else if(this.x > canvas.width - 25) {
                        this.x = canvas.width - 25;
                    }
                    
                };
                
                Paddle.prototype.makeItSo = function() {
                    context.fillStyle = "green";
                    context.fillRect(this.x - 25, 350, 50, 10);
                    
                };
                
                var paddle = new Paddle(canvas.width/2 - 25, 50);
                
            //ball object
                
                var Balls = function(){
                    this.x = canvas.width/2;
                    this.y = 344;
                    this.speedX = 5;
                    this.speedY = -5;
                    this.radius = 6;
                };
                
                Balls.prototype.checkWallCollision = function(){
                    if (this.x - this.radius <= 0){
                        this.speedX = this.speedX * -1;
                    }   else if (this.x + this.radius >= canvas.width) {
                        this.speedX = this.speedX * -1;
                    }   else if (this.y - this.radius <= 0) {
                        this.speedY = this.speedY * -1;
                    }   else if (this.y + this.radius > canvas.height) {
                        this.speedY = this.speedY * -1;
                    }
                };
                
                Balls.prototype.moveBall = function (){
                    this.x += this.speedX;
                    this.y += this.speedX;
                };
                
                Balls.prototype.create = function(){
                    
                    context.beginPath();
                    context.arc(this.x, this.y, this.radius, 0, 360, false);
                    context.fillStyle = "blue";
                    context.fill();
                };
                
                var ball = new Balls();
                
                //main program
                function mainProgramUpdate(event) {
                    //clear the canvas
                    context.clearRect(0, 350, canvas.width, canvas.height);
                    
                    //move mouse
                    canvas.addEventListener("mousemove", function(event){
                        var mouseX = getMousePos(event);
                        paddle.x = mouseX.x;
                    });
                    paddle.constrainPaddle(); 
                    //console.log(paddle.x);
                    paddle.makeItSo();
                    
                    //update and move ball
                    ball.checkWallCollision();
                    ball.moveBall();
                    ball.create();
                    
                    
                }
                
                setInterval(mainProgramUpdate, 41);
                
       </script>
    </body>
    
    
    
    
    
    
    
    
    
    
</html>