<!DOCTYPE html>

<!--The only way I can see to make this work is to use setInterval.
    Hopefully that will work with this, and I am basically going to 
    run a function that runs the entirety of the code when setInterval
    runs.
-->
<html lang="en">
    <head>
            
           
           
       </script>
       <script type="text/javascript" src="main.js"></script>
       <style>
           #myCanvas {
               border: 1px solid black;
               position: absolute;
               left: 50%;
               top: 50%;
               margin-left: -400px;
               margin-top: -200px;
           }
           
           /*hide cursor while over canvas*/
           #myCanvas:hover {
               cursor: none;
           }
       </style>
       <title>The Brick Game</title>
       
    </head>
    
    <body>
       <canvas id="myCanvas" width="800" height="400" onload="draw();"></canvas>
       <script type="text/javascript" src="main.js"></script>
       <script type="text/javascript">
           
            var canvas = document.getElementById('myCanvas');
            var context = canvas.getContext('2d');
            var mouseX;
            
            
            //draw paddle
            
                function getMousePos(event) {
                    var rect = canvas.getBoundingClientRect();
                    return {
                      x: event.clientX - rect.left,
                      y: event.clientY - rect.top
                    };
                }
                
                var Paddle = function(x, width) {
                    this.x = x,
                    this.width = width;
                };
                
                Paddle.prototype.updatePos = function() {
                    
                    //using mouse
                    canvas.addEventListener("mousemove", function(event){
                        var mouseX = getMousePos(event);
                        this.x = mouseX.x;
                        console.log(this.x);
                    });
                    
                    /*
                    //using arrows
                    document.addEventListener("keydown", function(event){
                        if(event.keyCode == 37) {
                            this.x -= 5;
                        } else if (event.keyCode == 39) {
                            this.x += 5;
                        }
                    });
                    */
                    
                    //constrain the paddle
                    if (this.x < 25){
                        this.x = 25;
                    } else if(this.x > canvas.width - 25) {
                        this.x = canvas.width - 25;
                    }
                    
                };
                
                Paddle.prototype.makeItSo = function() {
                    context.fillStyle = "green";
                    context.fillRect(this.x - 25, 350, 50, 10);
                    
                };
                
                var paddle = new Paddle(canvas.width/2 - 25, 50);
                
                
                //paddle.draw(event);
                
                
                
                //main program
                function mainProgramUpdate(event) {
                    //clear the canvas
                    context.clearRect(0, 350, canvas.width, canvas.height);
                    
                    paddle.updatePos();
                    //console.log(paddle.x);
                    paddle.makeItSo();
                    
                    
                }
                setInterval(mainProgramUpdate, 41);
                
       </script>
    </body>
    
    
    
    
    
    
    
    
    
    
</html>